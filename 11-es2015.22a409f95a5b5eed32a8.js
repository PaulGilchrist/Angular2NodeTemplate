(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{nKdS:function(e,t,s){"use strict";s.r(t),s.d(t,"UserModule",(function(){return _}));var r=s("ofXK"),n=s("3Pt+"),i=s("tk/3"),o=s("tyNb"),a=s("YkZh"),c=s("fXoL"),b=s("JhMT"),d=s("5eHb"),l=s("2Vo4"),u=s("itXk"),h=s("LRne"),g=s("z6cu"),m=s("7o/Q");function f(e=-1){return t=>t.lift(new p(e,t))}class p{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new v(e,this.count,this.source))}}class v extends m.a{constructor(e,t,s){super(e),this.count=t,this.source=s}error(e){if(!this.isStopped){const{source:t,count:s}=this;if(0===s)return super.error(e);s>-1&&(this.count=s-1),t.subscribe(this._unsubscribeAndRecycle())}}}var R=s("lJxs"),Q=s("vkgz"),M=s("JIr8"),N=s("AytR");let w=(()=>{class e{constructor(e){this.http=e,this.states=new l.a([]),this.states$=this.states.asObservable(),this.users=new l.a([]),this.users$=this.users.asObservable()}getUsers(e=!1){if(e||0===this.users.getValue().length||Date.now()-this._lastUserDataRetreivalTime>N.a.dataCaching.userData){const e=localStorage.getItem("users");if(e){const t=JSON.parse(e);this.users.next(t),console.log("GET users")}else Object(u.a)([this.http.get(N.a.apiUrl+"addresses.json"),this.http.get(N.a.apiUrl+"users.json")]).pipe(f(3),Object(R.a)(([e,t])=>(t.forEach(t=>t.addresses=e.filter(e=>t.addressIds.includes(e.id))),t)),Object(Q.a)(e=>{this._lastUserDataRetreivalTime=Date.now(),this.users.next(e),console.log("GET users")}),Object(M.a)(this.handleError)).subscribe()}return this.users$}getStates(e=!1){return(e||0===this.states.getValue().length||Date.now()-this._lastStateDataRetreivalTime>N.a.dataCaching.defaultLong)&&this.http.get(N.a.apiUrl+"states.json").pipe(f(3),Object(Q.a)(e=>{this._lastStateDataRetreivalTime=Date.now(),this.states.next(e),console.log("GET states")}),Object(M.a)(this.handleError)).subscribe(),this.states$}updateUser(e){const t=this.users.getValue();return t.map(t=>e.id===t.id?e:t),localStorage.setItem("users",JSON.stringify(t)),this.users.next(t),Object(h.a)(!0)}handleError(e){return console.error(e),Object(g.a)(e||"Server error")}}return e.\u0275fac=function(t){return new(t||e)(c.Vb(i.b))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac}),e})();const S=function(e,t,s){return{slideInLeft:e,bounce:t,shake:s}};function y(e,t){if(1&e){const e=c.Sb();c.Rb(0,"div",1),c.Rb(1,"h3"),c.sc(2,"User"),c.Qb(),c.Rb(3,"form",2,3),c.Rb(5,"div",4),c.Rb(6,"label",5),c.sc(7,"First Name"),c.Qb(),c.Rb(8,"div",6),c.Rb(9,"div",7),c.Rb(10,"div",8),c.Nb(11,"i",9),c.Qb(),c.Qb(),c.Rb(12,"input",10,11),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formUser.firstName=t})),c.Qb(),c.Qb(),c.Rb(14,"div",12),c.sc(15," First name must be between 2 and 20 characters "),c.Qb(),c.Qb(),c.Rb(16,"div",4),c.Rb(17,"label",5),c.sc(18,"Last Name"),c.Qb(),c.Rb(19,"div",6),c.Rb(20,"div",7),c.Rb(21,"div",8),c.Nb(22,"i",13),c.Qb(),c.Qb(),c.Rb(23,"input",14,15),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formUser.lastName=t})),c.Qb(),c.Qb(),c.Rb(25,"div",12),c.sc(26," Last name must be between 2 and 20 characters "),c.Qb(),c.Qb(),c.Rb(27,"div",4),c.Rb(28,"label",5),c.sc(29,"Email Address"),c.Qb(),c.Rb(30,"div",6),c.Rb(31,"div",7),c.Rb(32,"div",8),c.Nb(33,"i",16),c.Qb(),c.Qb(),c.Rb(34,"input",17,18),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formUser.email=t})),c.Qb(),c.Qb(),c.Rb(36,"div",12),c.sc(37," Not a valid email address "),c.Qb(),c.Qb(),c.Rb(38,"div",4),c.Rb(39,"label",5),c.sc(40,"Phone Number"),c.Qb(),c.Rb(41,"div",6),c.Rb(42,"div",7),c.Rb(43,"div",8),c.Nb(44,"i",19),c.Qb(),c.Qb(),c.Rb(45,"input",20,21),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formUser.phone=t})),c.Qb(),c.Qb(),c.Rb(47,"div",12),c.sc(48," Phone is not in the required format (###) ###-#### "),c.Qb(),c.Qb(),c.Rb(49,"div",4),c.Rb(50,"label",5),c.sc(51,"Date of Birth"),c.Qb(),c.Rb(52,"div",6),c.Rb(53,"div",7),c.Rb(54,"div",8),c.Nb(55,"i",22),c.Qb(),c.Qb(),c.Rb(56,"input",23,24),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formUser.dob=t})),c.Qb(),c.Qb(),c.Rb(58,"div",12),c.sc(59," Date of birth is invalid "),c.Qb(),c.Qb(),c.Nb(60,"div",25),c.Rb(61,"button",26),c.Zb("click",(function(){return c.mc(e),c.cc().saveForm()})),c.Nb(62,"i",27),c.sc(63," Save"),c.Qb(),c.sc(64," \xa0 "),c.Rb(65,"button",26),c.Zb("click",(function(){return c.mc(e),c.cc().cancelForm()})),c.Nb(66,"i",28),c.sc(67," Cancel"),c.Qb(),c.Nb(68,"div",29),c.Qb(),c.Qb()}if(2&e){const e=c.lc(4),t=c.lc(13),s=c.lc(24),r=c.lc(35),n=c.lc(46),i=c.lc(57),o=c.cc();c.gc("ngClass",c.jc(37,S,"new"===o.status,"saved"===o.status,"canceled"===o.status)),c.Bb(5),c.Eb("has-error",t.invalid&&t.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formUser.firstName),c.Bb(2),c.gc("hidden",t.valid||t.pristine),c.Bb(2),c.Eb("has-error",s.invalid&&s.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formUser.lastName),c.Bb(2),c.gc("hidden",s.valid||s.pristine),c.Bb(2),c.Eb("has-error",r.invalid&&r.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formUser.email),c.Bb(2),c.gc("hidden",r.valid||r.pristine),c.Bb(2),c.Eb("has-error",n.invalid&&n.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formUser.phone),c.Bb(2),c.gc("hidden",n.valid||n.pristine),c.Bb(2),c.Eb("has-error",i.invalid&&i.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formUser.dob),c.Bb(2),c.gc("hidden",i.valid),c.Bb(3),c.Eb("btn-sm",o.shrink),c.gc("disabled",e.pristine||e.invalid),c.Bb(4),c.Eb("btn-sm",o.shrink),c.gc("disabled",e.pristine)}}let C=(()=>{class e{constructor(){this.shrink=window.innerWidth<768,this.status="new",this.save=new c.n}set user(e){this.inputUser=e,this.formUser=e?Object.assign({},e):null}ngOnInit(){window.onresize=()=>this.shrink=window.innerWidth<768}saveForm(){Object.assign(this.inputUser,this.formUser),this.save.emit(this.inputUser),this.status="saved"}cancelForm(){Object.assign(this.formUser,this.inputUser),this.status="canceled"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-form"]],inputs:{user:"user"},outputs:{save:"save"},decls:1,vars:1,consts:[["id","user-form","class","animated",3,"ngClass",4,"ngIf"],["id","user-form",1,"animated",3,"ngClass"],["novalidate",""],["userForm","ngForm"],[1,"form-group"],[1,"control-label"],[1,"input-group","margin-bottom-sm"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user","fa-fw"],["type","text","name","firstName","placeholder","First Name","pattern","[A-Za-z ,.'-]+","required","","autofocus","","minlength","2","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["firstNameControl","ngModel"],[1,"alert","alert-danger",3,"hidden"],[1,"fa","fa-users","fa-fw"],["type","text","name","lastName","placeholder","Last Name","pattern","[A-Za-z ,.'-]+","required","","minlength","2","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["lastNameControl","ngModel"],[1,"fa","fa-envelope-o","fa-fw"],["type","email","name","email","required","","placeholder","Email address","pattern","[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",1,"form-control",3,"ngModel","ngModelChange"],["emailControl","ngModel"],[1,"fa","fa-phone","fa-fw"],["type","tel","name","phone","placeholder","(###) ###-####","pattern","[\\(]\\d{3}[\\)][\\s]\\d{3}[\\-]\\d{4}","required","",1,"form-control",3,"ngModel","ngModelChange"],["phoneControl","ngModel"],[1,"fa","fa-calendar","fa-fw"],["type","date","name","dob","placeholder","MM/DD/YYYY",1,"form-control",3,"ngModel","ngModelChange"],["dobControl","ngModel"],[2,"height","10px"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check"],[1,"fa","fa-times"],[1,"hidden-md-up",2,"height","20px"]],template:function(e,t){1&e&&c.rc(0,y,69,41,"div",0),2&e&&c.gc("ngIf",t.formUser)},directives:[r.j,r.h,n.p,n.g,n.h,n.a,n.l,n.m,n.d,n.c,n.f,n.i],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:5px}h2[_ngcontent-%COMP%]{margin-top:0}input.ng-valid[_ngcontent-%COMP%]{border-left:5px solid #5cb85c}input.ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #d9534f}label[_ngcontent-%COMP%]{margin-bottom:1px}"]}),e})();function B(e,t){if(1&e&&(c.Rb(0,"option",29),c.sc(1),c.Qb()),2&e){const e=t.$implicit;c.gc("value",e.abbreviation),c.Bb(1),c.tc(e.name)}}function U(e,t){if(1&e){const e=c.Sb();c.Rb(0,"div",1),c.Rb(1,"h3"),c.sc(2,"Address"),c.Qb(),c.Rb(3,"form",2,3),c.Rb(5,"div",4),c.Rb(6,"label",5),c.sc(7,"Name"),c.Qb(),c.Rb(8,"div",6),c.Rb(9,"div",7),c.Rb(10,"div",8),c.Nb(11,"i",9),c.Qb(),c.Qb(),c.Rb(12,"input",10,11),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formAddress.name=t})),c.Qb(),c.Qb(),c.Rb(14,"div",12),c.sc(15," Name only allows for alpha characters. First word must be capatalized. "),c.Qb(),c.Qb(),c.Rb(16,"div",4),c.Rb(17,"label",5),c.sc(18,"Street Number"),c.Qb(),c.Rb(19,"div",6),c.Rb(20,"div",7),c.Rb(21,"div",8),c.Nb(22,"i",13),c.Qb(),c.Qb(),c.Rb(23,"input",14,15),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formAddress.streetNumber=t})),c.Qb(),c.Qb(),c.Rb(25,"div",12),c.sc(26," Street number is invalid and must be between 1 and 99999 "),c.Qb(),c.Qb(),c.Rb(27,"div",4),c.Rb(28,"label",5),c.sc(29,"Street Name"),c.Qb(),c.Rb(30,"div",6),c.Rb(31,"div",7),c.Rb(32,"div",8),c.Nb(33,"i",16),c.Qb(),c.Qb(),c.Rb(34,"input",17,18),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formAddress.streetName=t})),c.Qb(),c.Qb(),c.Rb(36,"div",12),c.sc(37," Street name only allows for alpha characters. First word must be capatalized. "),c.Qb(),c.Qb(),c.Rb(38,"div",4),c.Rb(39,"label",5),c.sc(40,"City"),c.Qb(),c.Rb(41,"div",6),c.Rb(42,"div",7),c.Rb(43,"div",8),c.Nb(44,"i",19),c.Qb(),c.Qb(),c.Rb(45,"input",20,21),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formAddress.city=t})),c.Qb(),c.Qb(),c.Rb(47,"div",12),c.sc(48," City is invalid. First word must be capatalized. "),c.Qb(),c.Qb(),c.Rb(49,"div",4),c.Rb(50,"label",5),c.sc(51,"State"),c.Qb(),c.Rb(52,"div",6),c.Rb(53,"div",7),c.Rb(54,"div",8),c.Nb(55,"i",22),c.Qb(),c.Qb(),c.Rb(56,"select",23,24),c.Zb("change",(function(t){return c.mc(e),c.cc().onUpdateState(t)})),c.rc(58,B,2,2,"option",25),c.Qb(),c.Qb(),c.Rb(59,"div",12),c.sc(60," State is required "),c.Qb(),c.Qb(),c.Rb(61,"div",4),c.Rb(62,"label",5),c.sc(63,"Zip Code"),c.Qb(),c.Rb(64,"div",6),c.Rb(65,"div",7),c.Rb(66,"div",8),c.Nb(67,"i",26),c.Qb(),c.Qb(),c.Rb(68,"input",27,28),c.Zb("ngModelChange",(function(t){return c.mc(e),c.cc().formAddress.zipCode=t})),c.Qb(),c.Qb(),c.Rb(70,"div",12),c.sc(71," Zip code must be in the format ##### or #####-#### "),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&e){const e=c.lc(13),t=c.lc(24),s=c.lc(35),r=c.lc(46),n=c.lc(57),i=c.lc(69),o=c.cc();c.Bb(5),c.Eb("has-error",e.invalid&&e.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.name),c.Bb(2),c.gc("hidden",e.valid||e.pristine),c.Bb(2),c.Eb("has-error",t.invalid&&t.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.streetNumber),c.Bb(2),c.gc("hidden",t.valid||t.pristine),c.Bb(2),c.Eb("has-error",s.invalid&&s.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.streetName),c.Bb(2),c.gc("hidden",s.valid||s.pristine),c.Bb(2),c.Eb("has-error",r.invalid&&r.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.city),c.Bb(2),c.gc("hidden",r.valid||r.pristine),c.Bb(2),c.Eb("has-error",n.invalid&&n.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.state),c.Bb(2),c.gc("ngForOf",o.states),c.Bb(1),c.gc("hidden",n.valid||n.pristine),c.Bb(2),c.Eb("has-error",i.invalid&&i.dirty),c.Bb(7),c.Eb("form-control-sm",o.shrink),c.gc("ngModel",o.formAddress.zipCode),c.Bb(2),c.gc("hidden",i.valid||i.pristine)}}let O=(()=>{class e{constructor(e,t){this.toastrService=e,this._userService=t,this.shrink=window.innerWidth<768,this.states=[],this.save=new c.n}set address(e){this.inputAddress=e,this.formAddress=e?Object.assign({},e):null}ngOnInit(){this.stateSubscription=this._userService.getStates().subscribe(e=>this.states=e),window.onresize=()=>this.shrink=window.innerWidth<768}ngOnDestroy(){this.stateSubscription.unsubscribe()}onUpdateState(e){this.toastrService.success(e.target.selectedOptions[0].text,"State Changed")}saveForm(){Object.assign(this.inputAddress,this.formAddress),this.save.emit(this.inputAddress)}cancelForm(){Object.assign(this.formAddress,this.inputAddress)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(d.b),c.Mb(w))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-address-form"]],inputs:{address:"address"},outputs:{save:"save"},decls:1,vars:1,consts:[["class","animated slideInRight",4,"ngIf"],[1,"animated","slideInRight"],["novalidate",""],["addressForm","ngForm"],[1,"form-group"],[1,"control-label"],[1,"input-group","margin-bottom-sm"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-thumb-tack","fa-fw"],["type","text","name","name","placeholder","Enter name (optional)","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["nameControl","ngModel"],[1,"alert","alert-danger",3,"hidden"],[1,"fa","fa-location-arrow","fa-fw"],["type","number","name","streetNumber","placeholder","Enter street house #","required","","min","1","max","99999",1,"form-control",3,"ngModel","ngModelChange"],["streetNumberControl","ngModel"],[1,"fa","fa-map-marker","fa-fw"],["type","text","name","streetName","required","","placeholder","Enter street name","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["streetNameControl","ngModel"],[1,"fa","fa-compass","fa-fw"],["type","text","name","city","required","","placeholder","Enter city name","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["cityControl","ngModel"],[1,"fa","fa-plane","fa-fw"],["name","state",1,"form-control",3,"ngModel","change"],["stateControl","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-globe","fa-fw"],["type","text","name","zipCode","required","","placeholder","Enter zip code","pattern","[0-9]{5}(?:-[0-9]{4})?",1,"form-control",3,"ngModel","ngModelChange"],["zipCodeControl","ngModel"],[3,"value"]],template:function(e,t){1&e&&c.rc(0,U,72,37,"div",0),2&e&&c.gc("ngIf",t.formAddress)},directives:[r.j,n.p,n.g,n.h,n.a,n.l,n.f,n.i,n.k,n.m,n.n,r.i,n.j,n.o],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:5px}h2[_ngcontent-%COMP%]{margin-top:0}input.ng-valid[_ngcontent-%COMP%]{border-left:5px solid #5cb85c}input.ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #d9534f}label[_ngcontent-%COMP%]{margin-bottom:1px}"]}),e})();const k=function(e,t){return{"fa-caret-down":e,"fa-caret-up":t}};function E(e,t){if(1&e&&c.Nb(0,"i",20),2&e){const e=c.cc(2);c.gc("ngClass",c.ic(1,k,!e.sortReverse,e.sortReverse))}}function A(e,t){if(1&e&&c.Nb(0,"i",20),2&e){const e=c.cc(2);c.gc("ngClass",c.ic(1,k,!e.sortReverse,e.sortReverse))}}function Z(e,t){if(1&e&&c.Nb(0,"i",20),2&e){const e=c.cc(2);c.gc("ngClass",c.ic(1,k,!e.sortReverse,e.sortReverse))}}function x(e,t){if(1&e&&c.Nb(0,"i",20),2&e){const e=c.cc(2);c.gc("ngClass",c.ic(1,k,!e.sortReverse,e.sortReverse))}}function I(e,t){if(1&e){const e=c.Sb();c.Rb(0,"tr",21),c.Zb("click",(function(){c.mc(e);const s=t.$implicit;return c.cc(2).selectUser(s)})),c.Rb(1,"td"),c.sc(2),c.Qb(),c.Rb(3,"td"),c.sc(4),c.Qb(),c.Rb(5,"td"),c.sc(6),c.Qb(),c.Rb(7,"td"),c.sc(8),c.Qb(),c.Qb()}if(2&e){const e=t.$implicit,s=c.cc(2);c.Eb("bg-secondary",e===s.selectedUser)("text-light",e===s.selectedUser)("bold",e.isDirty),c.Bb(2),c.tc(e.firstName),c.Bb(2),c.tc(e.lastName),c.Bb(2),c.tc(e.email),c.Bb(2),c.tc(e.phone)}}function j(e,t){if(1&e){const e=c.Sb();c.Rb(0,"div",15),c.Rb(1,"table",16),c.Rb(2,"thead"),c.Rb(3,"tr"),c.Rb(4,"th",17),c.Zb("click",(function(){return c.mc(e),c.cc().changeSort("firstName")})),c.sc(5," First Name\xa0 "),c.rc(6,E,1,4,"i",18),c.Qb(),c.Rb(7,"th",17),c.Zb("click",(function(){return c.mc(e),c.cc().changeSort("lastName")})),c.sc(8," Last Name\xa0 "),c.rc(9,A,1,4,"i",18),c.Qb(),c.Rb(10,"th",17),c.Zb("click",(function(){return c.mc(e),c.cc().changeSort("email")})),c.sc(11," Email\xa0 "),c.rc(12,Z,1,4,"i",18),c.Qb(),c.Rb(13,"th",17),c.Zb("click",(function(){return c.mc(e),c.cc().changeSort("phone")})),c.sc(14," Phone\xa0 "),c.rc(15,x,1,4,"i",18),c.Qb(),c.Qb(),c.Qb(),c.Rb(16,"tbody"),c.rc(17,I,9,10,"tr",19),c.dc(18,"sortObjects"),c.dc(19,"filterObjects"),c.Qb(),c.Qb(),c.Qb()}if(2&e){const e=c.cc();c.Bb(1),c.Eb("table-sm",e.shrink),c.Bb(5),c.gc("ngIf","firstName"===e.sortType),c.Bb(3),c.gc("ngIf","lastName"===e.sortType),c.Bb(3),c.gc("ngIf","email"===e.sortType),c.Bb(3),c.gc("ngIf","phone"===e.sortType),c.Bb(2),c.gc("ngForOf",c.fc(18,7,c.ec(19,11,e.users,e.searchString),e.sortType,e.sortReverse))}}let z=(()=>{class e{constructor(){this.choose=new c.n,this.isOpen=!0,this.sortType="firstName",this.sortReverse=!1,this.searchString="",this.selectedUser=null,this.shrink=window.innerWidth<768}ngOnInit(){window.onresize=()=>this.shrink=window.innerWidth<768}changeSort(e){e===this.sortType?this.sortReverse=!this.sortReverse:this.sortType=e}selectUser(e){this.selectedUser=e,this.choose.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-list"]],inputs:{users:"users"},outputs:{choose:"choose"},decls:20,vars:13,consts:[[1,"animated","slideInUp"],[1,"card"],[1,"card-header","bg-dark","text-light","d-flex","align-items-center"],[1,"mr-auto"],[1,"badge-light","rounded"],[1,"form-inline"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search","fa-fw"],["name","searchString","type","text","placeholder","Search String","aria-label","Search String",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-fw","align-self-center",3,"click"],[1,"card-body"],["class","table-responsive",4,"ngIf"],[1,"card-footer","text-info"],[1,"table-responsive"],[1,"table","table-striped","table-hover",2,"cursor","pointer"],["scope","col",3,"click"],["class","fa",3,"ngClass",4,"ngIf"],[3,"bg-secondary","text-light","bold","click",4,"ngFor","ngForOf"],[1,"fa",3,"ngClass"],[3,"click"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Rb(2,"div",2),c.Rb(3,"h5",3),c.sc(4,"User List\xa0"),c.Rb(5,"span",4),c.sc(6),c.Qb(),c.Qb(),c.Rb(7,"form",5),c.Rb(8,"div",6),c.Rb(9,"div",7),c.Rb(10,"span",8),c.Nb(11,"i",9),c.Qb(),c.Qb(),c.Rb(12,"input",10),c.Zb("ngModelChange",(function(e){return t.searchString=e})),c.Qb(),c.Qb(),c.Qb(),c.sc(13," \xa0\xa0"),c.Rb(14,"i",11),c.Zb("click",(function(){return t.isOpen=!t.isOpen})),c.Qb(),c.Qb(),c.Rb(15,"div",12),c.rc(16,j,20,14,"div",13),c.Qb(),c.Rb(17,"div",14),c.sc(18," Select user to edit or view address details"),c.Nb(19,"br"),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.Bb(6),c.tc(t.users.length),c.Bb(6),c.Eb("form-control-sm",t.shrink),c.gc("ngModel",t.searchString),c.Bb(2),c.Eb("fa-chevron-right",!t.isOpen)("fa-chevron-down",t.isOpen),c.Bb(1),c.Eb("collapse",!t.isOpen),c.Bb(1),c.gc("ngIf",t.users.length>0),c.Bb(1),c.Eb("collapse",!t.isOpen))},directives:[n.p,n.g,n.h,n.a,n.f,n.i,r.j,r.i,r.h],pipes:[a.c,a.b],encapsulation:2}),e})(),F=(()=>{class e{constructor(e,t,s){this.connectivityService=e,this.toastrService=t,this._userService=s,this.address=null,this.addresses=[],this.isConnected=!0,this.subscriptions=[],this.user=null,this.users=[]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){this.subscriptions.push(this.connectivityService.isConnected$.subscribe(e=>{if(this.isConnected=e,e){const e=localStorage.getItem("dirtyUsers");e&&(JSON.parse(e).forEach(e=>this.onSaveUser(e)),localStorage.removeItem("dirtyUsers"))}})),this.subscriptions.push(this._userService.getUsers(!0).subscribe(e=>this.users=e))}onSaveUser(e){if(this.isConnected)this._userService.updateUser(e).subscribe(t=>{this.toastrService.success(`User '${e.firstName} ${e.lastName}' saved to API`,"Save User"),console.log(`User '${e.firstName} ${e.lastName}' saved to API`)},t=>{console.error(`Error saving user '${e.firstName} ${e.lastName}' to API`,"Save User")});else{e.isDirty=!0,this.users.map(t=>e.id===t.id?e:t),localStorage.setItem("users",JSON.stringify(this.users));const t=this.users.filter(e=>e.isDirty);localStorage.setItem("dirtyUsers",JSON.stringify(t)),this.toastrService.success(`Offline - User '${e.firstName} ${e.lastName}' saved locally`,"Save User"),console.log(`Offline - User '${e.firstName} ${e.lastName}' saved locally.  Once connected, changes will be uploaded`)}}onSelect(e){window.scrollTo(0,0),this.user=e,e.addresses&&e.addresses.length>0&&(this.address=e.addresses[0])}reset(){localStorage.removeItem("users"),localStorage.removeItem("dirtyUsers"),this.user=null,this.address=null,this._userService.getUsers(!0),console.log("User list reset")}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(b.a),c.Mb(d.b),c.Mb(w))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-shell"]],decls:9,vars:3,consts:[[1,"row"],[1,"col"],[3,"user","save"],[3,"address"],[1,"btn","btn-warning","mb-3",3,"click"],[3,"users","choose"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Rb(2,"app-user-form",2),c.Zb("save",(function(e){return t.onSaveUser(e)})),c.Qb(),c.Qb(),c.Rb(3,"div",1),c.Nb(4,"app-address-form",3),c.Qb(),c.Qb(),c.Rb(5,"button",4),c.Zb("click",(function(){return t.reset()})),c.sc(6,"Reset List"),c.Qb(),c.Nb(7,"br"),c.Rb(8,"app-user-list",5),c.Zb("choose",(function(e){return t.onSelect(e)})),c.Qb()),2&e&&(c.Bb(2),c.gc("user",t.user),c.Bb(2),c.gc("address",t.address),c.Bb(4),c.gc("users",t.users))},directives:[C,O,z],encapsulation:2}),e})(),_=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},providers:[w],imports:[[a.a,r.b,n.b,i.c,o.f.forChild([{path:"",component:F}])]]}),e})()}}]);