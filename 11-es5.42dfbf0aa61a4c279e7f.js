function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{nKdS:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("3Pt+"),s=n("tk/3"),i=n("tyNb"),o=n("YkZh"),l=n("fXoL"),d=n("JhMT"),c=n("5eHb"),m=n("2Vo4"),u=n("itXk"),p=n("LRne"),f=n("z6cu"),h=n("7o/Q");function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t){return t.lift(new S(e,t))}}var g,S=function(){function e(t,n){_classCallCheck(this,e),this.count=t,this.source=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new y(e,this.count,this.source))}}]),e}(),y=function(e){function t(e,n,r){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).count=n,a.source=r,a}return _inherits(t,e),_createClass(t,[{key:"error",value:function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return _get(_getPrototypeOf(t.prototype),"error",this).call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}}}]),t}(h.a),b=n("lJxs"),E=n("vkgz"),x=n("JIr8"),C=n("AytR"),w=((g=function(){function e(t){_classCallCheck(this,e),this.http=t,this.states=new m.a([]),this.states$=this.states.asObservable(),this.users=new m.a([]),this.users$=this.users.asObservable()}return _createClass(e,[{key:"getUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||0===this.users.getValue().length||Date.now()-this._lastUserDataRetreivalTime>C.a.dataCaching.userData){var n=localStorage.getItem("users");if(n){var r=JSON.parse(n);this.users.next(r),console.log("GET users")}else Object(u.a)([this.http.get(C.a.apiUrl+"addresses.json"),this.http.get(C.a.apiUrl+"users.json")]).pipe(v(3),Object(b.a)((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return r.forEach((function(e){return e.addresses=n.filter((function(t){return e.addressIds.includes(t.id)}))})),r})),Object(E.a)((function(t){e._lastUserDataRetreivalTime=Date.now(),e.users.next(t),console.log("GET users")})),Object(x.a)(this.handleError)).subscribe()}return this.users$}},{key:"getStates",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t||0===this.states.getValue().length||Date.now()-this._lastStateDataRetreivalTime>C.a.dataCaching.defaultLong)&&this.http.get(C.a.apiUrl+"states.json").pipe(v(3),Object(E.a)((function(t){e._lastStateDataRetreivalTime=Date.now(),e.states.next(t),console.log("GET states")})),Object(x.a)(this.handleError)).subscribe(),this.states$}},{key:"updateUser",value:function(e){var t=this.users.getValue();return t.map((function(t){return e.id===t.id?e:t})),localStorage.setItem("users",JSON.stringify(t)),this.users.next(t),Object(p.a)(!0)}},{key:"handleError",value:function(e){return console.error(e),Object(f.a)(e||"Server error")}}]),e}()).\u0275fac=function(e){return new(e||g)(l["\u0275\u0275inject"](s.b))},g.\u0275prov=l["\u0275\u0275defineInjectable"]({token:g,factory:g.\u0275fac}),g),k=function(e,t,n){return{slideInLeft:e,bounce:t,shake:n}};function O(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275elementStart"](1,"h3"),l["\u0275\u0275text"](2,"User"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"form",2,3),l["\u0275\u0275elementStart"](5,"div",4),l["\u0275\u0275elementStart"](6,"label",5),l["\u0275\u0275text"](7,"First Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",6),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275elementStart"](10,"div",8),l["\u0275\u0275element"](11,"i",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"input",10,11),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formUser.firstName=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",12),l["\u0275\u0275text"](15," First name must be between 2 and 20 characters "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",4),l["\u0275\u0275elementStart"](17,"label",5),l["\u0275\u0275text"](18,"Last Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",6),l["\u0275\u0275elementStart"](20,"div",7),l["\u0275\u0275elementStart"](21,"div",8),l["\u0275\u0275element"](22,"i",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"input",14,15),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formUser.lastName=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div",12),l["\u0275\u0275text"](26," Last name must be between 2 and 20 characters "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",4),l["\u0275\u0275elementStart"](28,"label",5),l["\u0275\u0275text"](29,"Email Address"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",6),l["\u0275\u0275elementStart"](31,"div",7),l["\u0275\u0275elementStart"](32,"div",8),l["\u0275\u0275element"](33,"i",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"input",17,18),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formUser.email=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](36,"div",12),l["\u0275\u0275text"](37," Not a valid email address "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"div",4),l["\u0275\u0275elementStart"](39,"label",5),l["\u0275\u0275text"](40,"Phone Number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](41,"div",6),l["\u0275\u0275elementStart"](42,"div",7),l["\u0275\u0275elementStart"](43,"div",8),l["\u0275\u0275element"](44,"i",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"input",20,21),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formUser.phone=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](47,"div",12),l["\u0275\u0275text"](48," Phone is not in the required format (###) ###-#### "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](49,"div",4),l["\u0275\u0275elementStart"](50,"label",5),l["\u0275\u0275text"](51,"Date of Birth"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"div",6),l["\u0275\u0275elementStart"](53,"div",7),l["\u0275\u0275elementStart"](54,"div",8),l["\u0275\u0275element"](55,"i",22),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](56,"input",23,24),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formUser.dob=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](58,"div",12),l["\u0275\u0275text"](59," Date of birth is invalid "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](60,"div",25),l["\u0275\u0275elementStart"](61,"button",26),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().saveForm()})),l["\u0275\u0275element"](62,"i",27),l["\u0275\u0275text"](63," Save"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](64," \xa0 "),l["\u0275\u0275elementStart"](65,"button",26),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().cancelForm()})),l["\u0275\u0275element"](66,"i",28),l["\u0275\u0275text"](67," Cancel"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](68,"div",29),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275reference"](4),a=l["\u0275\u0275reference"](13),s=l["\u0275\u0275reference"](24),i=l["\u0275\u0275reference"](35),o=l["\u0275\u0275reference"](46),d=l["\u0275\u0275reference"](57),c=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction3"](37,k,"new"===c.status,"saved"===c.status,"canceled"===c.status)),l["\u0275\u0275advance"](5),l["\u0275\u0275classProp"]("has-error",a.invalid&&a.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formUser.firstName),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",a.valid||a.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",s.invalid&&s.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formUser.lastName),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",s.valid||s.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",i.invalid&&i.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formUser.email),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",i.valid||i.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",o.invalid&&o.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formUser.phone),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",o.valid||o.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",d.invalid&&d.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formUser.dob),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",d.valid),l["\u0275\u0275advance"](3),l["\u0275\u0275classProp"]("btn-sm",c.shrink),l["\u0275\u0275property"]("disabled",r.pristine||r.invalid),l["\u0275\u0275advance"](4),l["\u0275\u0275classProp"]("btn-sm",c.shrink),l["\u0275\u0275property"]("disabled",r.pristine)}}var _,M=((_=function(){function e(){_classCallCheck(this,e),this.shrink=window.innerWidth<768,this.status="new",this.save=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;window.onresize=function(){return e.shrink=window.innerWidth<768}}},{key:"saveForm",value:function(){Object.assign(this.inputUser,this.formUser),this.save.emit(this.inputUser),this.status="saved"}},{key:"cancelForm",value:function(){Object.assign(this.formUser,this.inputUser),this.status="canceled"}},{key:"user",set:function(e){this.inputUser=e,this.formUser=e?Object.assign({},e):null}}]),e}()).\u0275fac=function(e){return new(e||_)},_.\u0275cmp=l["\u0275\u0275defineComponent"]({type:_,selectors:[["app-user-form"]],inputs:{user:"user"},outputs:{save:"save"},decls:1,vars:1,consts:[["id","user-form","class","animated",3,"ngClass",4,"ngIf"],["id","user-form",1,"animated",3,"ngClass"],["novalidate",""],["userForm","ngForm"],[1,"form-group"],[1,"control-label"],[1,"input-group","margin-bottom-sm"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user","fa-fw"],["type","text","name","firstName","placeholder","First Name","pattern","[A-Za-z ,.'-]+","required","","autofocus","","minlength","2","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["firstNameControl","ngModel"],[1,"alert","alert-danger",3,"hidden"],[1,"fa","fa-users","fa-fw"],["type","text","name","lastName","placeholder","Last Name","pattern","[A-Za-z ,.'-]+","required","","minlength","2","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["lastNameControl","ngModel"],[1,"fa","fa-envelope-o","fa-fw"],["type","email","name","email","required","","placeholder","Email address","pattern","[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",1,"form-control",3,"ngModel","ngModelChange"],["emailControl","ngModel"],[1,"fa","fa-phone","fa-fw"],["type","tel","name","phone","placeholder","(###) ###-####","pattern","[\\(]\\d{3}[\\)][\\s]\\d{3}[\\-]\\d{4}","required","",1,"form-control",3,"ngModel","ngModelChange"],["phoneControl","ngModel"],[1,"fa","fa-calendar","fa-fw"],["type","date","name","dob","placeholder","MM/DD/YYYY",1,"form-control",3,"ngModel","ngModelChange"],["dobControl","ngModel"],[2,"height","10px"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check"],[1,"fa","fa-times"],[1,"hidden-md-up",2,"height","20px"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,O,69,41,"div",0),2&e&&l["\u0275\u0275property"]("ngIf",t.formUser)},directives:[r.j,r.h,a.p,a.g,a.h,a.a,a.l,a.m,a.d,a.c,a.f,a.i],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:5px}h2[_ngcontent-%COMP%]{margin-top:0}input.ng-valid[_ngcontent-%COMP%]{border-left:5px solid #5cb85c}input.ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #d9534f}label[_ngcontent-%COMP%]{margin-bottom:1px}"]}),_);function P(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option",29),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;l["\u0275\u0275property"]("value",n.abbreviation),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.name)}}function U(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275elementStart"](1,"h3"),l["\u0275\u0275text"](2,"Address"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"form",2,3),l["\u0275\u0275elementStart"](5,"div",4),l["\u0275\u0275elementStart"](6,"label",5),l["\u0275\u0275text"](7,"Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",6),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275elementStart"](10,"div",8),l["\u0275\u0275element"](11,"i",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"input",10,11),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formAddress.name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",12),l["\u0275\u0275text"](15," Name only allows for alpha characters. First word must be capatalized. "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",4),l["\u0275\u0275elementStart"](17,"label",5),l["\u0275\u0275text"](18,"Street Number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",6),l["\u0275\u0275elementStart"](20,"div",7),l["\u0275\u0275elementStart"](21,"div",8),l["\u0275\u0275element"](22,"i",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"input",14,15),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formAddress.streetNumber=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](25,"div",12),l["\u0275\u0275text"](26," Street number is invalid and must be between 1 and 99999 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](27,"div",4),l["\u0275\u0275elementStart"](28,"label",5),l["\u0275\u0275text"](29,"Street Name"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",6),l["\u0275\u0275elementStart"](31,"div",7),l["\u0275\u0275elementStart"](32,"div",8),l["\u0275\u0275element"](33,"i",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"input",17,18),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formAddress.streetName=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](36,"div",12),l["\u0275\u0275text"](37," Street name only allows for alpha characters. First word must be capatalized. "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"div",4),l["\u0275\u0275elementStart"](39,"label",5),l["\u0275\u0275text"](40,"City"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](41,"div",6),l["\u0275\u0275elementStart"](42,"div",7),l["\u0275\u0275elementStart"](43,"div",8),l["\u0275\u0275element"](44,"i",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"input",20,21),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formAddress.city=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](47,"div",12),l["\u0275\u0275text"](48," City is invalid. First word must be capatalized. "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](49,"div",4),l["\u0275\u0275elementStart"](50,"label",5),l["\u0275\u0275text"](51,"State"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"div",6),l["\u0275\u0275elementStart"](53,"div",7),l["\u0275\u0275elementStart"](54,"div",8),l["\u0275\u0275element"](55,"i",22),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](56,"select",23,24),l["\u0275\u0275listener"]("change",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().onUpdateState(e)})),l["\u0275\u0275template"](58,P,2,2,"option",25),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](59,"div",12),l["\u0275\u0275text"](60," State is required "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](61,"div",4),l["\u0275\u0275elementStart"](62,"label",5),l["\u0275\u0275text"](63,"Zip Code"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](64,"div",6),l["\u0275\u0275elementStart"](65,"div",7),l["\u0275\u0275elementStart"](66,"div",8),l["\u0275\u0275element"](67,"i",26),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](68,"input",27,28),l["\u0275\u0275listener"]("ngModelChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().formAddress.zipCode=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](70,"div",12),l["\u0275\u0275text"](71," Zip code must be in the format ##### or #####-#### "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275reference"](13),a=l["\u0275\u0275reference"](24),s=l["\u0275\u0275reference"](35),i=l["\u0275\u0275reference"](46),o=l["\u0275\u0275reference"](57),d=l["\u0275\u0275reference"](69),c=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275classProp"]("has-error",r.invalid&&r.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.name),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",r.valid||r.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",a.invalid&&a.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.streetNumber),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",a.valid||a.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",s.invalid&&s.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.streetName),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",s.valid||s.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",i.invalid&&i.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.city),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",i.valid||i.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",o.invalid&&o.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.state),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",c.states),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("hidden",o.valid||o.pristine),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("has-error",d.invalid&&d.dirty),l["\u0275\u0275advance"](7),l["\u0275\u0275classProp"]("form-control-sm",c.shrink),l["\u0275\u0275property"]("ngModel",c.formAddress.zipCode),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidden",d.valid||d.pristine)}}var N,I=((N=function(){function e(t,n){_classCallCheck(this,e),this.toastrService=t,this._userService=n,this.shrink=window.innerWidth<768,this.states=[],this.save=new l.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.stateSubscription=this._userService.getStates().subscribe((function(t){return e.states=t})),window.onresize=function(){return e.shrink=window.innerWidth<768}}},{key:"ngOnDestroy",value:function(){this.stateSubscription.unsubscribe()}},{key:"onUpdateState",value:function(e){this.toastrService.success(e.target.selectedOptions[0].text,"State Changed")}},{key:"saveForm",value:function(){Object.assign(this.inputAddress,this.formAddress),this.save.emit(this.inputAddress)}},{key:"cancelForm",value:function(){Object.assign(this.formAddress,this.inputAddress)}},{key:"address",set:function(e){this.inputAddress=e,this.formAddress=e?Object.assign({},e):null}}]),e}()).\u0275fac=function(e){return new(e||N)(l["\u0275\u0275directiveInject"](c.b),l["\u0275\u0275directiveInject"](w))},N.\u0275cmp=l["\u0275\u0275defineComponent"]({type:N,selectors:[["app-address-form"]],inputs:{address:"address"},outputs:{save:"save"},decls:1,vars:1,consts:[["class","animated slideInRight",4,"ngIf"],[1,"animated","slideInRight"],["novalidate",""],["addressForm","ngForm"],[1,"form-group"],[1,"control-label"],[1,"input-group","margin-bottom-sm"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-thumb-tack","fa-fw"],["type","text","name","name","placeholder","Enter name (optional)","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["nameControl","ngModel"],[1,"alert","alert-danger",3,"hidden"],[1,"fa","fa-location-arrow","fa-fw"],["type","number","name","streetNumber","placeholder","Enter street house #","required","","min","1","max","99999",1,"form-control",3,"ngModel","ngModelChange"],["streetNumberControl","ngModel"],[1,"fa","fa-map-marker","fa-fw"],["type","text","name","streetName","required","","placeholder","Enter street name","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["streetNameControl","ngModel"],[1,"fa","fa-compass","fa-fw"],["type","text","name","city","required","","placeholder","Enter city name","pattern","[A-Z]{1}[a-z]+(?:[\\s-][a-zA-Z]+)*",1,"form-control",3,"ngModel","ngModelChange"],["cityControl","ngModel"],[1,"fa","fa-plane","fa-fw"],["name","state",1,"form-control",3,"ngModel","change"],["stateControl","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-globe","fa-fw"],["type","text","name","zipCode","required","","placeholder","Enter zip code","pattern","[0-9]{5}(?:-[0-9]{4})?",1,"form-control",3,"ngModel","ngModelChange"],["zipCodeControl","ngModel"],[3,"value"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,U,72,37,"div",0),2&e&&l["\u0275\u0275property"]("ngIf",t.formAddress)},directives:[r.j,a.p,a.g,a.h,a.a,a.l,a.f,a.i,a.k,a.m,a.n,r.i,a.j,a.o],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:5px}h2[_ngcontent-%COMP%]{margin-top:0}input.ng-valid[_ngcontent-%COMP%]{border-left:5px solid #5cb85c}input.ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #d9534f}label[_ngcontent-%COMP%]{margin-bottom:1px}"]}),N),j=function(e,t){return{"fa-caret-down":e,"fa-caret-up":t}};function A(e,t){if(1&e&&l["\u0275\u0275element"](0,"i",20),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](1,j,!n.sortReverse,n.sortReverse))}}function R(e,t){if(1&e&&l["\u0275\u0275element"](0,"i",20),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](1,j,!n.sortReverse,n.sortReverse))}}function F(e,t){if(1&e&&l["\u0275\u0275element"](0,"i",20),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](1,j,!n.sortReverse,n.sortReverse))}}function z(e,t){if(1&e&&l["\u0275\u0275element"](0,"i",20),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](1,j,!n.sortReverse,n.sortReverse))}}function T(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",21),l["\u0275\u0275listener"]("click",(function(e){l["\u0275\u0275restoreView"](n);var r=t.$implicit;return l["\u0275\u0275nextContext"](2).selectUser(r)})),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"td"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=l["\u0275\u0275nextContext"](2);l["\u0275\u0275classProp"]("bg-secondary",r===a.selectedUser)("text-light",r===a.selectedUser)("bold",r.isDirty),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](r.firstName),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](r.lastName),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](r.email),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](r.phone)}}function V(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",15),l["\u0275\u0275elementStart"](1,"table",16),l["\u0275\u0275elementStart"](2,"thead"),l["\u0275\u0275elementStart"](3,"tr"),l["\u0275\u0275elementStart"](4,"th",17),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeSort("firstName")})),l["\u0275\u0275text"](5," First Name\xa0 "),l["\u0275\u0275template"](6,A,1,4,"i",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th",17),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeSort("lastName")})),l["\u0275\u0275text"](8," Last Name\xa0 "),l["\u0275\u0275template"](9,R,1,4,"i",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"th",17),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeSort("email")})),l["\u0275\u0275text"](11," Email\xa0 "),l["\u0275\u0275template"](12,F,1,4,"i",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"th",17),l["\u0275\u0275listener"]("click",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().changeSort("phone")})),l["\u0275\u0275text"](14," Phone\xa0 "),l["\u0275\u0275template"](15,z,1,4,"i",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"tbody"),l["\u0275\u0275template"](17,T,9,10,"tr",19),l["\u0275\u0275pipe"](18,"sortObjects"),l["\u0275\u0275pipe"](19,"filterObjects"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275classProp"]("table-sm",r.shrink),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf","firstName"===r.sortType),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","lastName"===r.sortType),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","email"===r.sortType),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","phone"===r.sortType),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind3"](18,7,l["\u0275\u0275pipeBind2"](19,11,r.users,r.searchString),r.sortType,r.sortReverse))}}var D,Z,L=((Z=function(){function e(){_classCallCheck(this,e),this.choose=new l.EventEmitter,this.isOpen=!0,this.sortType="firstName",this.sortReverse=!1,this.searchString="",this.selectedUser=null,this.shrink=window.innerWidth<768}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;window.onresize=function(){return e.shrink=window.innerWidth<768}}},{key:"changeSort",value:function(e){e===this.sortType?this.sortReverse=!this.sortReverse:this.sortType=e}},{key:"selectUser",value:function(e){this.selectedUser=e,this.choose.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||Z)},Z.\u0275cmp=l["\u0275\u0275defineComponent"]({type:Z,selectors:[["app-user-list"]],inputs:{users:"users"},outputs:{choose:"choose"},decls:20,vars:13,consts:[[1,"animated","slideInUp"],[1,"card"],[1,"card-header","bg-dark","text-light","d-flex","align-items-center"],[1,"mr-auto"],[1,"badge-light","rounded"],[1,"form-inline"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search","fa-fw"],["name","searchString","type","text","placeholder","Search String","aria-label","Search String",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-fw","align-self-center",3,"click"],[1,"card-body"],["class","table-responsive",4,"ngIf"],[1,"card-footer","text-info"],[1,"table-responsive"],[1,"table","table-striped","table-hover",2,"cursor","pointer"],["scope","col",3,"click"],["class","fa",3,"ngClass",4,"ngIf"],[3,"bg-secondary","text-light","bold","click",4,"ngFor","ngForOf"],[1,"fa",3,"ngClass"],[3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h5",3),l["\u0275\u0275text"](4,"User List\xa0"),l["\u0275\u0275elementStart"](5,"span",4),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"form",5),l["\u0275\u0275elementStart"](8,"div",6),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275elementStart"](10,"span",8),l["\u0275\u0275element"](11,"i",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"input",10),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchString=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](13," \xa0\xa0"),l["\u0275\u0275elementStart"](14,"i",11),l["\u0275\u0275listener"]("click",(function(e){return t.isOpen=!t.isOpen})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"div",12),l["\u0275\u0275template"](16,V,20,14,"div",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",14),l["\u0275\u0275text"](18," Select user to edit or view address details"),l["\u0275\u0275element"](19,"br"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](t.users.length),l["\u0275\u0275advance"](6),l["\u0275\u0275classProp"]("form-control-sm",t.shrink),l["\u0275\u0275property"]("ngModel",t.searchString),l["\u0275\u0275advance"](2),l["\u0275\u0275classProp"]("fa-chevron-right",!t.isOpen)("fa-chevron-down",t.isOpen),l["\u0275\u0275advance"](1),l["\u0275\u0275classProp"]("collapse",!t.isOpen),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.users.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275classProp"]("collapse",!t.isOpen))},directives:[a.p,a.g,a.h,a.a,a.f,a.i,r.j,r.i,r.h],pipes:[o.c,o.b],encapsulation:2}),Z),q=((D=function(){function e(t,n,r){_classCallCheck(this,e),this.connectivityService=t,this.toastrService=n,this._userService=r,this.address=null,this.addresses=[],this.isConnected=!0,this.subscriptions=[],this.user=null,this.users=[]}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.connectivityService.isConnected$.subscribe((function(t){if(e.isConnected=t,t){var n=localStorage.getItem("dirtyUsers");n&&(JSON.parse(n).forEach((function(t){return e.onSaveUser(t)})),localStorage.removeItem("dirtyUsers"))}}))),this.subscriptions.push(this._userService.getUsers(!0).subscribe((function(t){return e.users=t})))}},{key:"onSaveUser",value:function(e){var t=this;if(this.isConnected)this._userService.updateUser(e).subscribe((function(n){t.toastrService.success("User '".concat(e.firstName," ").concat(e.lastName,"' saved to API"),"Save User"),console.log("User '".concat(e.firstName," ").concat(e.lastName,"' saved to API"))}),(function(t){console.error("Error saving user '".concat(e.firstName," ").concat(e.lastName,"' to API"),"Save User")}));else{e.isDirty=!0,this.users.map((function(t){return e.id===t.id?e:t})),localStorage.setItem("users",JSON.stringify(this.users));var n=this.users.filter((function(e){return e.isDirty}));localStorage.setItem("dirtyUsers",JSON.stringify(n)),this.toastrService.success("Offline - User '".concat(e.firstName," ").concat(e.lastName,"' saved locally"),"Save User"),console.log("Offline - User '".concat(e.firstName," ").concat(e.lastName,"' saved locally.  Once connected, changes will be uploaded"))}}},{key:"onSelect",value:function(e){window.scrollTo(0,0),this.user=e,e.addresses&&e.addresses.length>0&&(this.address=e.addresses[0])}},{key:"reset",value:function(){localStorage.removeItem("users"),localStorage.removeItem("dirtyUsers"),this.user=null,this.address=null,this._userService.getUsers(!0),console.log("User list reset")}}]),e}()).\u0275fac=function(e){return new(e||D)(l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](c.b),l["\u0275\u0275directiveInject"](w))},D.\u0275cmp=l["\u0275\u0275defineComponent"]({type:D,selectors:[["app-user-shell"]],decls:9,vars:3,consts:[[1,"row"],[1,"col"],[3,"user","save"],[3,"address"],[1,"btn","btn-warning","mb-3",3,"click"],[3,"users","choose"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"app-user-form",2),l["\u0275\u0275listener"]("save",(function(e){return t.onSaveUser(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275element"](4,"app-address-form",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"button",4),l["\u0275\u0275listener"]("click",(function(e){return t.reset()})),l["\u0275\u0275text"](6,"Reset List"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](7,"br"),l["\u0275\u0275elementStart"](8,"app-user-list",5),l["\u0275\u0275listener"]("choose",(function(e){return t.onSelect(e)})),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("user",t.user),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("address",t.address),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("users",t.users))},directives:[M,I,L],encapsulation:2}),D);n.d(t,"UserModule",(function(){return W}));var J,W=((J=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:J}),J.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||J)},providers:[w],imports:[[o.a,r.b,a.b,s.c,i.f.forChild([{path:"",component:q}])]]}),J)}}]);