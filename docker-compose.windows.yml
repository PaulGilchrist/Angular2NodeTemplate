# docker-compose -f docker-compose.windows.yml build
# docker run -d -p 1433:1433 -e sa_password=Password123! -e ACCEPT_EULA=Y -v C:/data/:C:/data/ -e attach_dbs="[{'dbName':'ApiDev','dbFiles':['C:\\data\\ApiDev.mdf','C:\\data\\ApiDev_log.ldf']}]" microsoft/mssql-server-windows
version: '2.1'

networks:
  default:
    external:
      name: nat

services:
  angulartemplate-node-nano:
    image: paulgilchrist/angulartemplate-node-nano
    build:
      context: .
      dockerfile: Dockerfile.node.nano
    environment:
      - "Data Source=mssql-server-windows;Initial Catalog=ApiDev;Integrated Security=False;User Id=sa;Password=Password123!;Connect Timeout=60;Encrypt=True"
    ports:
      - "80:3000"
    depends_on:
      - mssql-server-windows
  mssql-server-windows:
    image: microsoft/mssql-server-windows
    environment:
      ACCEPT_EULA: Y
      sa_password: Password123!
      attach_dbs: "[{'dbName':'ApiDev','dbFiles':['C:\\\\data\\\\ApiDev.mdf','C:\\\\data\\\\ApiDev_log.ldf']}]"
    ports:
      - "1433:1433" # for debug.  Remove this for production
    volumes:
      - "C:/data/:C:/data/"

