"use strict";var __decorate=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},core_1=require("@angular/core"),router_1=require("@angular/router"),common_1=require("@angular/common"),identity_service_1=require("../services/identity.service"),TopNavComponent=function(){function t(t,e,i){this._location=t,this._router=e,this._identityService=i,this.shrinkNavbar=!1,this.user={identity:{isAuthenticated:!1}}}return t.prototype.onScroll=function(t){this.shrinkNavbar=(window.pageYOffset||document.documentElement.scrollTop)>300},t.prototype.ngOnInit=function(){this.user.identity.isAuthenticated=this._identityService.isTokenValid(),this.user.identity.isAuthenticated?this.user.identity.name=this._identityService.token.name:this.user.identity.name=null},t.prototype.currentPage=function(t){var e=!1,i=this._location.path();return e=0==t.length?0==i.length:0==i.indexOf(t)},t.prototype.login=function(){this._identityService.isTokenValid()?(this.user.identity.isAuthenticated=!0,this.user.identity.name=this._identityService.token.name):this._identityService.getToken()},t.prototype.logout=function(){this._identityService.clearToken(),this.user.identity.isAuthenticated=!1,this.user.identity.name=null,this._router.navigate(["home"])},t=__decorate([core_1.Component({selector:"nav-top",styleUrls:["app/nav/nav-top.component.css"],templateUrl:"app/nav/nav-top.component.html"}),__metadata("design:paramtypes",[common_1.Location,router_1.Router,identity_service_1.IdentityService])],t)}();exports.TopNavComponent=TopNavComponent;