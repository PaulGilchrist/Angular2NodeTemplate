"use strict";var __decorate=this&&this.__decorate||function(e,t,r,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),http_1=require("@angular/http"),Observable_1=require("rxjs/Observable");require("rxjs/add/operator/catch"),require("rxjs/add/operator/do"),require("rxjs/add/operator/map");var config_data_1=require("../data/config.data"),identity_service_1=require("../services/identity.service"),UserService=function(){function e(e,t){this.http=e,this._identityService=t,this._maxUserCacheTimeMilliseconds=36e5,this._usersUrl=config_data_1.CONFIG.apiUrl+"/users"}return e.prototype.getUsers=function(){var e=this;return!this.users||this._lastUserGetTime+this._maxUserCacheTimeMilliseconds<Date.now()?this.http.get(this._usersUrl).map(function(e){return e.json()}).do(function(t){e.users=t,e._lastUserGetTime=Date.now()}).catch(this.handleError):Observable_1.Observable.of(this.users)},e.prototype.getUserAddresses=function(e){var t=this._usersUrl+"/"+e.id+"/addresses";return this.http.get(t).map(function(e){return e.json()}).catch(this.handleError)},e.prototype.handleError=function(e){return console.error(e),Observable_1.Observable.throw(e.json().error||"Server error")},e=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[http_1.Http,identity_service_1.IdentityService])],e)}();exports.UserService=UserService;