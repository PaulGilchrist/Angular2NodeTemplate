{"version":3,"sources":["app/demos/pdf-demo.component.ts"],"names":[],"mappings":"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","file":"app/demos/pdf-demo.component.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { PDF_OVERVIEW } from './../data/pdf-overview.data';\r\n\r\ndeclare var pdfMake: any;\r\ndeclare var _:any;\r\n\r\nexport interface DocImage {\r\n    name: string;\r\n    size: number;\r\n}\r\n\r\n@Component({\r\n    selector: 'pdf-demo',\r\n    templateUrl: 'app/demos/pdf-demo.component.html'\r\n})\r\nexport class PdfDemoComponent {\r\n    overviewPdf: any = PDF_OVERVIEW; //Full docuemnt\r\n    _modalActive: Boolean = false;\r\n\r\n    viewModal(): void {\r\n        this._modalActive = true;\r\n    }\r\n\r\n    getImages(doc: any): DocImage[] {\r\n        var images: DocImage[] = [];\r\n        if(doc.images) {\r\n            var imageNames = Object.keys(doc.images);\r\n            for(let i=0; i<imageNames.length; i++) {\r\n                var image: any = {};\r\n                image.name = imageNames[i];\r\n                image.size = doc.images[image.name].length;\r\n                images.push(image);\r\n            }\r\n        }\r\n        //console.log(images);\r\n        return images;\r\n    }\r\n\r\n    removeImages(doc: any, maxSize: number): void {\r\n        //Get all images in the document and their sizes.\r\n        var images: DocImage[] = this.getImages(doc);\r\n        //Loop through content array looking for long images\r\n        for(let i=0; i<doc.content.length; i++) {\r\n            var imageName: string = doc.content[i].image;\r\n            if(imageName != null) {\r\n                //Find the matching image\r\n                var image: DocImage = _.findWhere(images, {name: imageName});\r\n                if(image.size > maxSize) {\r\n                    //Remove image content since it is too large\r\n                    //console.log('Removing image - ' + imageName + ' at index ' + i);\r\n                    doc.content.splice(i, 1);\r\n                    //The array is now one smaller so step back one\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    viewPdf(name: string): void {\r\n        let browser = this.getBrowser();\r\n        if(browser.substr(0,4)=='Edge') {\r\n            //Edge browser is not able to support large image sizes\r\n            this.removeImages(this.overviewPdf, 19964)\r\n        }\r\n        if((browser.substr(0,2)==\"IE\") || (browser.substr(0,4)=='Edge')) {\r\n            pdfMake.createPdf(this.overviewPdf).download('demo.pdf');\r\n        } else {\r\n            //View the PDF (temporarily Chrome & FireFox only)\r\n            pdfMake.createPdf(this.overviewPdf).open();\r\n        }\r\n        //Another option that we are not using is pdfMake.createPdf(this.overviewPdf).print(); //works in Chrome & FireFox only\r\n    }\r\n\r\n    getBrowser(): string {\r\n        var ua= navigator.userAgent;\r\n        var tem: RegExpMatchArray;\r\n        var M: RegExpMatchArray = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\r\n        if(/trident/i.test(M[1])){\r\n            tem=  /\\brv[ :]+(\\d+)/g.exec(ua) || [];\r\n            return 'IE '+(tem[1] || '');\r\n        }\r\n        if(M[1]=== 'Chrome'){\r\n            tem= ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\r\n            if(tem!= null) return tem.slice(1).join(' ').replace('OPR', 'Opera');\r\n        }\r\n        M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];\r\n        if((tem= ua.match(/version\\/(\\d+)/i))!= null) M.splice(1, 1, tem[1]);\r\n        return M.join(' ');\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}