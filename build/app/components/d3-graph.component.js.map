{"version":3,"sources":["app/components/d3-graph.component.ts"],"names":[],"mappings":"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","file":"app/components/d3-graph.component.js","sourcesContent":["import { Component, Input, OnInit, OnChanges, ElementRef, ViewEncapsulation } from '@angular/core';\r\n\r\n//Must be inlcuded in index.html\r\ndeclare var d3: any;\r\ndeclare var _:any;\r\n\r\n@Component({\r\n    encapsulation: ViewEncapsulation.None,\r\n    selector: 'd3-graph',\r\n    styleUrls: ['app/components/d3-graph.component.css'],\r\n    template: ''\r\n})\r\nexport class D3GraphComponent implements OnInit, OnChanges {\r\n    /* ToDo Ideas (d3.v3.js)\r\n        Leverage d3.geo.path().area()\r\n        Maps.  See http://app.pluralsight.com/training/player?course=d3js-data-visualization-fundamentals\r\n        Word Cloud\r\n        Stacked Bars\r\n        Multi-line\r\n    */\r\n    isReady: boolean = false;\r\n    _tooltip: any;\r\n\r\n    @Input() data: Array<any> = null;\r\n    @Input() height: number = 300;\r\n    @Input() labels: string = \"all\";\r\n    @Input() warningLevel: number = Infinity;\r\n    @Input() width: number = 350;\r\n    @Input() type: string = \"bar\";\r\n    @Input() xKey: string = \"x\"; //The key within the data object that contains the x values\r\n    @Input() yKey: string = \"y\"; //The key within the data object that contains the y values\r\n    @Input() xType: string = \"number\"; //Valid options are number or date\r\n\r\n    constructor(private el: ElementRef) {}\r\n\r\n    ngOnInit(): void {\r\n        //Only start drawing the graphs after all inputs have been initially set and the OnInit has completed\r\n        this.isReady = true;\r\n        //Create a tooltip that will remain hidden until hover\r\n        this._tooltip = d3.select(\"body\").append(\"div\")\r\n            .attr(\"class\", \"d3-tooltip\")\r\n            .style({\r\n                \"opacity\": 0,\r\n                \"pointer-events\": \"none\",\r\n                \"position\": \"absolute\"\r\n            });\r\n        //Set initial values from querystring if they existing\r\n        this.draw();\r\n    }\r\n\r\n    ngOnChanges(): void {\r\n        if(this.isReady) this.draw();\r\n    }\r\n\r\n    createBarGraph(): void {\r\n        var _this = this;\r\n        var padding = 2;\r\n        //Find best fit for data to fill height\r\n        var yMultiplier = _this.height / d3.max(_this.data, function(d: any) { return d[_this.yKey]; });\r\n        //Find best fit for data to fill width\r\n        var xMultiplier = _this.width / _this.data.length;\r\n        var svg = d3.select(_this.el.nativeElement).append(\"svg\").attr({ width: _this.width, height: _this.height });\r\n        //Bars\r\n        svg.selectAll(\"rect\").data(_this.data).enter().append(\"rect\")\r\n            .attr({\r\n                x: function(d: any,i: number) { return i * xMultiplier;},\r\n                y: function(d: any) { return _this.height - (d[_this.yKey] * yMultiplier); },\r\n                width: xMultiplier - padding,\r\n                height: function(d: any) { return d[_this.yKey] * yMultiplier; },\r\n                class: function(d: any) { return _this.classPicker(d[_this.yKey], _this.warningLevel); }\r\n            })\r\n            //Dynamic Lables\r\n            .on(\"mouseover\", function(d: any) {\r\n                //Show tooltip at mouse pointer\r\n                _this._tooltip.transition().duration(500).style(\"opacity\", 0.9);\r\n                    var tip = '<strong>' + _this.xKey + ':</strong> ' + d[_this.xKey] + '<br/>';\r\n                    tip += '<strong>' + _this.yKey + ':</strong> ' + d[_this.yKey] + '<br/>';\r\n                   _this._tooltip.html(tip)\r\n                        .style(\"left\", (d3.event.pageX) + \"px\")\r\n                        .style(\"top\", (d3.event.pageY - 28) + \"px\")\r\n                //Add y value to top of bar\r\n                svg.append(\"text\")\r\n                    .text(d[_this.yKey])\r\n                    .attr({\r\n                        x: parseFloat(d3.select(this).attr(\"x\")) + parseFloat(d3.select(this).attr(\"width\"))/2,\r\n                        y: parseFloat(d3.select(this).attr(\"y\")) + 14, //Text 14px below the bar top, or roughly up 1em\r\n                        \"text-anchor\": \"middle\",\r\n                        id: \"hoverLabel_\" + d[_this.yKey]\r\n                    });\r\n            })\r\n            .on(\"mouseout\", function(d: any) {\r\n                //Hide tooltip\r\n                _this._tooltip.transition().duration(500).style(\"opacity\", 0);\r\n                //Remove y value to top of bar\r\n                d3.select(\"#hoverLabel_\" + d[_this.yKey]).remove();\r\n            })\r\n        //Static Lables\r\n        svg.selectAll(\"text\").data(_this.data).enter().append(\"text\")\r\n            .text(function(d: any) { return _this.showLabels(_this.yKey, d[_this.yKey], _this.labels, true); })\r\n            .attr({\r\n                x: function(d: any, i: number) { return i * xMultiplier + (xMultiplier - padding) / 2; },\r\n                y: function(d: any) { return _this.height - (d[_this.yKey] * yMultiplier) + 14; }, //Text 14px below the bar top, or roughly up 1em\r\n                \"text-anchor\": \"middle\"\r\n            });\r\n   }\r\n\r\n    createLineChart(): void {\r\n        //Array must be sorted by x before passing to this function or the line will jump all over the place\r\n        var _this = this;\r\n        var padding = 26;\r\n        var isDate: boolean = (this.xType==\"date\");\r\n        var xScale = this.scale(_this.xKey, [padding+5, _this.width-10], true);\r\n        var yScale = this.scale(_this.yKey, [_this.height-padding, 10], false);\r\n        var xAxisGen = d3.svg.axis().scale(xScale).orient(\"bottom\");\r\n        if(isDate) {\r\n            xAxisGen.tickFormat(d3.time.format(\"%b\"));\r\n        }\r\n        var yAxisGen = d3.svg.axis().scale(yScale).orient(\"left\");\r\n        var lineFunction = d3.svg.line()\r\n            //Make sure all date strings are date objects before putting them into the path\r\n            .x(function(d: any) { return xScale(isDate ? new Date(d[_this.xKey]) : d[_this.xKey]); })\r\n            .y(function(d: any) { return yScale(d[_this.yKey]); })\r\n            .interpolate(\"linear\");\r\n        var svg = d3.select(_this.el.nativeElement).append(\"svg\").attr({ width: _this.width, height: _this.height });\r\n        //Line\r\n        svg.append(\"path\")\r\n           .attr(\"class\", \"d3-path\")\r\n            .attr({\r\n                d: lineFunction(_this.data),\r\n                \"fill\": \"none\"\r\n            });\r\n        //Dots\r\n        svg.selectAll(\"circle\").data(_this.data).enter().append(\"circle\")\r\n            .attr({\r\n                cx: function(d: any) { return xScale(isDate ? new Date(d[_this.xKey]) : d[_this.xKey]); },\r\n                cy: function(d: any) { return yScale(d[_this.yKey]); },\r\n                r: 3,\r\n                class: function(d: any) { return _this.classPicker(d[_this.yKey], _this.warningLevel); }\r\n            })\r\n            //Dynamic Lables\r\n            .on(\"mouseover\", function(d: any) {\r\n                //Show tooltip at mouse pointer\r\n                _this._tooltip.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0.9);\r\n                    var tip = '<strong>' + _this.xKey + ':</strong> ' + d[_this.xKey] + '<br/>';\r\n                    tip += '<strong>' + _this.yKey + ':</strong> ' + d[_this.yKey] + '<br/>';\r\n                   _this._tooltip.html(tip)\r\n                        .style(\"left\", (d3.event.pageX) + \"px\")\r\n                        .style(\"top\", (d3.event.pageY - 28) + \"px\")\r\n            })\r\n            .on(\"mouseout\", function(d: any) {\r\n                //Hide tooltip\r\n                _this._tooltip.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0);\r\n            })\r\n        //Lables\r\n        svg.selectAll(\"text\").data(_this.data).enter().append(\"text\")\r\n            .text(function(d: any) { return _this.showLabels(_this.yKey, d[_this.yKey], _this.labels, true); })\r\n            .attr({\r\n                x: function(d: any) { return xScale(isDate ? new Date(d[_this.xKey]) : d[_this.xKey]); },\r\n                y: function(d: any) { return yScale(d[_this.yKey]); },\r\n                \"text-anchor\": \"start\",\r\n                class: function(d: any) { return _this.classPicker(d[_this.yKey], _this.warningLevel); }\r\n            });\r\n        var xAxis = svg.append(\"g\").call(xAxisGen)\r\n            .attr({\r\n                class: \"d3-axis\",\r\n                transform: \"translate(0, \" + (_this.height-padding) + \")\"\r\n            });\r\n        var yAxis = svg.append(\"g\").call(yAxisGen)\r\n            .attr({\r\n                class: \"d3-axis\",\r\n                transform: \"translate(\" + padding + \", 0)\"\r\n            });\r\n    }\r\n\r\n    createPieChart(): void {\r\n        var _this = this;\r\n        var isDate: boolean = (this.xType==\"date\");\r\n        var timeFormat = d3.time.format(\"%b\");\r\n        var r = _this.width/2;\r\n        var color = d3.scale.category20c();\r\n        var vis = d3.select(_this.el.nativeElement).append(\"svg:svg\").data([_this.data])\r\n            .attr({ width: r*2, height: r*2 })\r\n            .append(\"svg:g\")\r\n            .attr(\"transform\", \"translate(\" + r + \",\" + r + \")\");\r\n        var pie = d3.layout.pie().value(function(d: any) { return d[_this.yKey]; });\r\n        // declare an arc generator function\r\n        var arc = d3.svg.arc().outerRadius(r);\r\n        // select paths, use arc generator to draw\r\n        var arcs = vis.selectAll(\"g.slice\").data(pie).enter().append(\"svg:g\").attr(\"class\", \"slice\");\r\n        arcs.append(\"svg:path\")\r\n            .attr({\r\n                fill: function(d: any, i: any){ return color(i); },\r\n                d: function (d: any) { return arc(d); }\r\n            })\r\n            //Dynamic Lables\r\n            .on(\"mouseover\", function(d: any, i: number) {\r\n                //Show tooltip at mouse pointer\r\n                _this._tooltip.transition().duration(500).style(\"opacity\", 0.9);\r\n                    var tip = '<strong>' + _this.xKey + ':</strong> ' + _this.data[i][_this.xKey] + '<br/>';\r\n                    tip += '<strong>' + _this.yKey + ':</strong> ' + _this.data[i][_this.yKey] + '<br/>';\r\n                   _this._tooltip.html(tip)\r\n                        .style(\"left\", (d3.event.pageX) + \"px\")\r\n                        .style(\"top\", (d3.event.pageY - 28) + \"px\")\r\n            })\r\n            .on(\"mouseout\", function(d: any) {\r\n                //Hide tooltip\r\n                _this._tooltip.transition().duration(500).style(\"opacity\", 0);\r\n            })\r\n        //Labels\r\n        arcs.append(\"svg:text\")\r\n            .attr({\r\n                class: \"d3-axis\",\r\n                transform: function(d: any) {\r\n                    d.innerRadius = 0;\r\n                    d.outerRadius = r;\r\n                    var labelR = r * 0.9;\r\n                    var c = arc.centroid(d), x = c[0], y = c[1],\r\n                    // pythagorean theorem for hypotenuse\r\n                    h = Math.sqrt(x*x + y*y);\r\n                    return \"translate(\" + (x/h * labelR) +  ',' + (y/h * labelR) +  \")\";\r\n                },\r\n                \"text-anchor\": \"middle\"\r\n            })\r\n            .text( function(d: any, i: number) {\r\n                var max = d3.max(_this.data, function(d: any) { return d[_this.yKey]; });\r\n                var min = d3.min(_this.data, function(d: any) { return d[_this.yKey]; });\r\n                var xValue = _this.data[i][_this.xKey];\r\n                var yValue = _this.data[i][_this.yKey];\r\n                if((_this.labels!='none') && ((_this.labels=='minmax' && (yValue==max || yValue==min)) || (_this.labels=='all')))  {\r\n                    return isDate ? timeFormat(new Date(xValue)) : xValue;\r\n                }\r\n            });\r\n    }\r\n\r\n    createScatterPlot(): void {\r\n        //Unlike LineChart, this array does not need to be sorted by x\r\n        var _this = this;\r\n        var padding = 26;\r\n        var isDate: boolean = (this.xType==\"date\");\r\n        var xScale = this.scale(_this.xKey, [padding+5, _this.width-10], true);\r\n        var yScale = this.scale(_this.yKey, [_this.height-padding, 10], false);\r\n        var xAxisGen = d3.svg.axis().scale(xScale).orient(\"bottom\");\r\n        if(isDate) {\r\n            xAxisGen.tickFormat(d3.time.format(\"%b\"));\r\n        }\r\n        var yAxisGen = d3.svg.axis().scale(yScale).orient(\"left\");\r\n        var svg = d3.select(_this.el.nativeElement).append(\"svg\").attr({ width: _this.width, height: _this.height });\r\n        //Dots\r\n        svg.selectAll(\"circle\").data(_this.data).enter().append(\"circle\")\r\n            .attr({\r\n                cx: function(d: any) { return xScale(isDate ? new Date(d[_this.xKey]) : d[_this.xKey]); },\r\n                cy: function(d: any) { return yScale(d[_this.yKey]); },\r\n                r: 5,\r\n                class: function(d: any) { return _this.classPicker(d[_this.yKey], _this.warningLevel); }\r\n            })\r\n            //Dynamic Lables\r\n            .on(\"mouseover\", function(d: any) {\r\n                //Show tooltip at mouse pointer\r\n                _this._tooltip.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0.9);\r\n                    var tip = '<strong>' + _this.xKey + ':</strong> ' + d[_this.xKey] + '<br/>';\r\n                    tip += '<strong>' + _this.yKey + ':</strong> ' + d[_this.yKey] + '<br/>';\r\n                   _this._tooltip.html(tip)\r\n                        .style(\"left\", (d3.event.pageX) + \"px\")\r\n                        .style(\"top\", (d3.event.pageY - 28) + \"px\")\r\n            })\r\n            .on(\"mouseout\", function(d: any) {\r\n                //Hide tooltip\r\n                _this._tooltip.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0);\r\n            })\r\n        //Static Lables\r\n        svg.selectAll(\"text\").data(_this.data).enter().append(\"text\")\r\n            .text(function(d: any) { return _this.showLabels(_this.yKey, d[_this.yKey], _this.labels, true); })\r\n            .attr({\r\n                x: function(d: any) { return xScale(isDate ? new Date(d[_this.xKey]) : d[_this.xKey]); },\r\n                y: function(d: any) { return yScale(d[_this.yKey]); },\r\n                \"text-anchor\": \"start\",\r\n                class: function(d: any) { return _this.classPicker(d[_this.yKey], _this.warningLevel); }\r\n            });\r\n        var xAxis = svg.append(\"g\").call(xAxisGen)\r\n            .attr({\r\n                class: \"d3-axis\",\r\n                transform: \"translate(0, \" + (_this.height-padding) + \")\"\r\n            });\r\n        var yAxis = svg.append(\"g\").call(yAxisGen)\r\n            .attr({\r\n                class: \"d3-axis\",\r\n                transform: \"translate(\" + padding + \", 0)\"\r\n            });\r\n    }\r\n\r\n    classPicker(value: number, warningLevel: number): string {\r\n        //Returns a warning class that can be styles through CSS to make data above the warningLevel stand out\r\n        if (value >= warningLevel) {\r\n            return \"d3-warning\";\r\n        } else {\r\n            return \"d3-default\";\r\n        }\r\n    }\r\n\r\n    draw(): void {\r\n        //Remove any existing SVG content before re-drawing\r\n        d3.select(this.el.nativeElement).selectAll(\"*\").remove();\r\n        switch (this.type) {\r\n            case \"bar\":\r\n                this.createBarGraph();\r\n                break;\r\n            case \"line\":\r\n                this.createLineChart();\r\n                break;\r\n            case \"pie\":\r\n                this.createPieChart();\r\n                break;\r\n            case \"scatter\":\r\n                this.createScatterPlot();\r\n                break;\r\n        }\r\n    }\r\n\r\n    scale(key: string, range: Array<number>, useMin: boolean=false): any {\r\n        //scale to use to best fit data into viewable space\r\n        //size refers to the x or y pixel size\r\n        var _this = this;\r\n        var min: any, max: any, scale: any;\r\n        if(this.xType==\"date\") {\r\n            min = new Date(d3.min(_this.data, function(d: any) { return d[key]; }));\r\n            max = new Date(d3.max(_this.data, function(d: any) { return d[key]; }));\r\n            scale = d3.time.scale();\r\n        } else {\r\n            if(useMin) {\r\n                min = d3.min(_this.data, function(d: any) { return d[key]; });\r\n            } else {\r\n                min = 0;\r\n            }\r\n            max = d3.max(_this.data, function(d: any) { return d[key]; });\r\n            scale = d3.scale.linear();\r\n        }\r\n        return scale.domain([min, max]).range(range);\r\n    }\r\n\r\n    showLabels(key: string, value: any, type: string, useMin: boolean=true): any {\r\n        //Allows for either showing no labels, just the min and max labels, or all labels\r\n        var _this = this;\r\n        var max = d3.max(_this.data, function(d: any) { return d[key]; });\r\n        var min = 0;\r\n        if(useMin) {\r\n            min = d3.min(_this.data, function(d: any) { return d[key]; });\r\n        }\r\n        if((type!='none') && ((type=='minmax' && (value==max || value==min)) || (type=='all')))  {\r\n            return value;\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}