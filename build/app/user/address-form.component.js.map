{"version":3,"sources":["app/user/address-form.component.ts"],"names":[],"mappings":"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","file":"app/user/address-form.component.js","sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\r\n\r\nimport { State } from '../models/state.model';\r\nimport { STATES } from './../data/states.data';\r\nimport { Address } from '../models/address.model';\r\nimport { User } from '../models/user.model';\r\nimport { UserService } from '../services/user.service';\r\n\r\ndeclare var toastr: any;\r\ndeclare var _: any;\r\n\r\n@Component({\r\n    selector: 'address-form',\r\n    styleUrls: ['app/user/address-form.component.css'],\r\n    templateUrl: 'app/user/address-form.component.html'\r\n})\r\nexport class AddressFormComponent {\r\n    private _address: Address = null;\r\n    private _user: User = null;\r\n\r\n    public errorMessage: string;\r\n    public isActive: boolean = false;\r\n    public isBusy = false\r\n\r\n    public name: string;\r\n    public streetNumber: number;\r\n    public streetName: string;\r\n    public city: string;\r\n    public state: string;\r\n    public states: State[] = STATES; //Full list of states\r\n    public zipCode: string;\r\n\r\n    @Input()\r\n    set user(user: User) {\r\n        if (user) {\r\n            this.isBusy = true;\r\n            this._user = user;\r\n            this._userService.getUserAddresses(user)\r\n                .subscribe(addresses => {\r\n                    this._address = addresses[0],\r\n                        this.name = addresses[0].name,\r\n                        this.streetNumber = addresses[0].streetNumber,\r\n                        this.streetName = addresses[0].streetName,\r\n                        this.city = addresses[0].city,\r\n                        this.state = addresses[0].state,\r\n                        this.zipCode = addresses[0].zipCode,\r\n                        this.isActive = true,\r\n                        this.isBusy = false\r\n                    }, error => this.errorMessage = <any>error);\r\n        }\r\n    }\r\n\r\n    //Bubble up that the form was saved\r\n    @Output() onSave = new EventEmitter<Address>();\r\n\r\n    constructor(public _userService: UserService) { }\r\n\r\n    onUpdateState(event: any): void {\r\n        //Only the value roles up to the parent select.  To get the label you have to go to the selected option\r\n        toastr.info(event.target.selectedOptions[0].text);\r\n    }\r\n\r\n    save(): void {\r\n        //For the purpose of this demo, we are not going to save directly back to the API, but rather to the in memory list\r\n        this._address.name = this.name;\r\n        this._address.streetNumber = this.streetNumber;\r\n        this._address.streetName = this.streetName;\r\n        this._address.city = this.city;\r\n        //We need to convert from full state name to state abbreviation\r\n        this._address.state = _.where(STATES, { name: this.state });\r\n        this._address.zipCode = this.zipCode;\r\n        //We will also set the address as isDirty so it can later update the API in bulk\r\n        this._address.isDirty = true;\r\n        //Bubble up that this user has been saved in case the parent is interested\r\n        this.onSave.emit(this._address);\r\n    }\r\n\r\n    cancel(): void {\r\n        //Reset the form back to the original user details\r\n        this.name = this._address.name;\r\n        this.streetNumber = this._address.streetNumber;\r\n        this.streetName = this._address.streetName;\r\n        this.city = this._address.city;\r\n        this.state = this._address.state;\r\n        this.zipCode = this._address.zipCode;\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}