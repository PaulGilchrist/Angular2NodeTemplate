"use strict";var __decorate=this&&this.__decorate||function(e,t,s,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var d=e.length-1;d>=0;d--)(a=e[d])&&(o=(i<3?a(o):i>3?a(t,s,o):a(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),states_data_1=require("./../data/states.data"),user_service_1=require("../services/user.service"),AddressFormComponent=function(){function e(e){this._userService=e,this._address=null,this._user=null,this.isActive=!1,this.isBusy=!1,this.states=states_data_1.STATES,this.onSave=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"user",{set:function(e){var t=this;e&&(this.isBusy=!0,this._user=e,this._userService.getUserAddresses(e).subscribe(function(e){t._address=e[0],t.name=e[0].name,t.streetNumber=e[0].streetNumber,t.streetName=e[0].streetName,t.city=e[0].city,t.state=e[0].state,t.zipCode=e[0].zipCode,t.isActive=!0,t.isBusy=!1},function(e){return t.errorMessage=e}))},enumerable:!0,configurable:!0}),e.prototype.onUpdateState=function(e){toastr.info(e.target.selectedOptions[0].text)},e.prototype.save=function(){this._address.name=this.name,this._address.streetNumber=this.streetNumber,this._address.streetName=this.streetName,this._address.city=this.city,this._address.state=_.where(states_data_1.STATES,{name:this.state}),this._address.zipCode=this.zipCode,this._address.isDirty=!0,this.onSave.emit(this._address)},e.prototype.cancel=function(){this.name=this._address.name,this.streetNumber=this._address.streetNumber,this.streetName=this._address.streetName,this.city=this._address.city,this.state=this._address.state,this.zipCode=this._address.zipCode},__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"user",null),__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"onSave",void 0),e=__decorate([core_1.Component({selector:"address-form",styleUrls:["app/user/address-form.component.css"],templateUrl:"app/user/address-form.component.html"}),__metadata("design:paramtypes",[user_service_1.UserService])],e)}();exports.AddressFormComponent=AddressFormComponent;