<!DOCTYPE html>
<html>
    <head>
        <base href="/">
        <title>Unit Tests</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/font-awesome.min.css" rel="stylesheet" />
        <link href="css/jquery-confirm.min.css" rel="stylesheet" />
        <link href="css/toastr.min.css" rel="stylesheet" />
        <link href="css/animate.min.css" rel="stylesheet" />
        <link href="css/dragula.min.css" rel="stylesheet" />
        <link href="css/app.css" rel="stylesheet" />
        <link rel="stylesheet" href="css/jasmine.css">
        <script src="js/jasmine.js"></script>
        <script src="js/jasmine-html.js"></script>
        <script src="js/boot.js"></script>
    </head>
    <body>
        <!-- 1. Load libraries -->
        <!-- Polyfill(s) for older browsers -->
        <script src="js/shim.min.js"></script>
        <script src="js/zone.min.js"></script>
        <script src="js/Reflect.js"></script>
        <script src="js/system.src.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery-confirm.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/underscore-min.js"></script>
        <script src="js/toastr.min.js"></script>
        <script src="js/d3.min.js"></script>
        <script src="js/dragula.min.js"></script>
        <script src="js/pdfmake.min.js"></script>
        <script src="js/vfs_fonts.js"></script>
        <!-- 2. Configure SystemJS -->
        <script src="systemjs.config.js"></script>
        <script>
            // System.config({
            //     packages: {
            //         app: { defaultExtension: 'js' }
            //     }
            // });
            Promise.all([
                System.import('@angular/core/testing'),
                System.import('@angular/platform-browser-dynamic/testing')
                ]))
            .then((providers) => {
                var coreTesting = providers[0];
                var browserTesting = providers[1];
                coreTesting.TestBed.initTestEnvironment(
                        browserTesting.BrowserDynamicTestingModule,
                        browserTesting.platformBrowserDynamicTesting());

            })
            .then(function () {
                // Finally, load all spec files.
                // This will run the tests directly.
                return Promise.all(
                        System.import('app/app.component.spec'),
                        System.import('app/pipes/filter-objects.pipe.spec'),
                        System.import('app/pipes/sort-objects.pipe.spec'),
                        System.import('app/services/identity.service.spec'),
                        System.import('app/services/user.service.spec')
            })
            .then(window.onload)
            .catch(console.error.bind(console));
            // //Load test scripts re-execute `window.onload` which triggers the Jasmine test-runner start or explain what went wrong
            // Promise.all([
            //     System.import('app/app.component.spec'),
            //     System.import('app/pipes/filter-objects.pipe.spec'),
            //     System.import('app/pipes/sort-objects.pipe.spec'),
            //     System.import('app/services/identity.service.spec'),
            //     System.import('app/services/user.service.spec')
            // ]).then(window.onload)
            //  .catch(console.error.bind(console));
            // System.import('systemjs.config.js')
            // .then(() =>
        </script>
    </body>
</html>

