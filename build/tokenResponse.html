<!DOCTYPE html>
<html>
<head>
    <title>Token Response</title>
    <script src="js/jquery.min.js"></script>
	<script>
		$('document').ready(function() {
			//Check to see if a token is returned and who issued it.  Store one token for each issuer in local storage
			var id_token = $.hashParam('id_token');
			if(id_token != null) {
				//Save token to local storage
				//For now we are storing just one token, but later, we want to store multiple tokens for each backend application.
				localStorage.setItem("id_token", id_token);
			}
			//If a redirectUrl exists, redirect to that otherwise go to the root of the website
			var redirectUrl = localStorage.getItem("redirectUrl");
			if(redirectUrl) {
				window.location.replace(redirectUrl);
			}
		});

		$.hashParam = function(name, hash) {
			if (!hash) {
			 	hash = window.location.hash;
			}
			var results = new RegExp('[#&]' + name + '=([^&#]*)').exec(hash);
			if (!results) {
				return undefined;
			}
			return results[1] || undefined;
		}

		$.urlParam = function(name, url) {
			if (!url) {
			 url = window.location.href;
			}
			var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(url);
			if (!results) {
				return undefined;
			}
			return results[1] || undefined;
		}
	</script>
</head>
<body>
</body>
</html>
